<div class="min-h-screen bg-gray-50 p-8 font-sans">
  <div class="max-w-[130rem] mx-auto">
    
    <div class="mb-12 text-center">
      <h1 class="text-3xl font-bold text-gray-800 mb-2">License Application</h1>
      <p class="text-gray-600">Complete the following steps to apply for your license</p>
    </div>

    <!-- Welcome Card -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-12 border-t-4 border-t-[#F7941D] max-w-[130rem] mx-auto">
      <div class="flex flex-col lg:flex-row">
        
        <!-- Left Info Section -->
        <div class="p-8 lg:w-1/3 border-b lg:border-b-0 lg:border-r border-gray-100 flex flex-col items-center justify-center text-center bg-orange-50/30">
          <div class="bg-orange-100 p-4 rounded-full text-orange-500 mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
              <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
            </svg>
          </div>
          <h3 class="text-xl font-bold text-gray-800 mb-1">Welcome</h3>
          <p class="text-sm font-medium text-orange-600">{{ particulars.fullName }}</p>
          <p class="text-xs text-gray-500 mt-2 px-4">Thank you for continuing with the final steps of your application.</p>
        </div>

        <!-- Right Content Section -->
        <div class="p-8 lg:w-2/3">
          <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-orange-500">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
            </svg>
            Instructions
          </h3>
          <p class="text-gray-600 text-sm leading-relaxed text-justify">
            {{ welcomeCard.details }}
          </p>
        </div>

      </div>
    </div>

    <!-- Stepper Header -->
    <div class="max-w-[130rem] mx-auto mb-8 px-4">
      <div class="flex items-center justify-between">
        <div *ngFor="let step of steps; let i = index" class="flex flex-col items-center relative z-10 w-1/3 cursor-pointer" (click)="goToStep(step.id)">
          <div class="w-10 h-10 rounded-full flex items-center justify-center border-2 transition-colors duration-300"
               [ngClass]="{'bg-[#F7941D] border-[#F7941D] text-white': currentStep >= step.id, 'bg-white border-gray-300 text-gray-400': currentStep < step.id}">
            <!-- Icons based on step -->
            <svg *ngIf="step.icon === 'user'" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
            </svg>
            <svg *ngIf="step.icon === 'check-circle'" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <svg *ngIf="step.icon === 'tool'" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437l1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008z" />
            </svg>
            <svg *ngIf="step.icon === 'thumbs-up'" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6.633 10.5c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75A2.25 2.25 0 0116.5 4.5c0 1.152-.26 2.247-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 00-1.423-.23H5.904M14.25 9h2.25M5.904 18.75c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 01-.521-3.507c0-1.553.295-3.036.831-4.396C3.387 10.203 4.167 9.75 5 9.75h1.053c.472 0 .745.556.5.96a8.958 8.958 0 00-1.302 4.665c0 1.194.232 2.333.654 3.375z" />
            </svg>
          </div>
          <span class="mt-2 text-sm font-medium" [ngClass]="{'text-[#F7941D]': currentStep >= step.id, 'text-gray-500': currentStep < step.id}">{{ step.title }}</span>
          
          <!-- Connector Line -->
          <div *ngIf="i < steps.length - 1" class="absolute top-5 left-1/2 w-full h-[2px] bg-gray-200 -z-10">
            <div class="h-full bg-[#F7941D] transition-all duration-300" [style.width.%]="currentStep > step.id ? 100 : 0"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Form Container -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 border-t-4 border-t-[#F7941D] p-8 max-w-[130rem] mx-auto">
      
      <!-- Step 1: License Details -->
      <div *ngIf="currentStep === 1">
        <h3 class="text-xl font-bold text-gray-800 mb-6 border-b pb-2">License Details</h3>
        
        <!-- Instructional Alert Card -->
        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6 flex items-start gap-3">
          <div class="mt-0.5 text-gray-500">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
              <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z" clip-rule="evenodd" />
            </svg>
          </div>
          <div class="text-sm text-gray-600 space-y-2">
            <p class="font-medium text-gray-800">Karibu kwenye hatua ya kwanza ya maombi ya leseni.</p>
            <p>Tafadhali jaza taarifa zako:</p>
            <ul class="list-disc list-inside space-y-1 ml-1">
              <li><span class="font-semibold text-gray-700">Previous License Number (If Any):</span> Weka nambari ya leseni yako ya awali, kama ulikuwa na moja.</li>
              <li><span class="font-semibold text-gray-700">Type of License Being Applied For:</span> Chagua aina ya leseni unayoiomba.</li>
              <li><span class="font-semibold text-gray-700">Single Application:</span> Unatakiwa kukamilisha ombi moja ulilo chagua hadi mwisho kabla ya kuchagua maombi mengine.</li>
            </ul>
            <p class="text-xs text-orange-600 font-medium mt-2 bg-orange-50 inline-block px-2 py-1 rounded border border-orange-100">
              Tip/Note: Hakikisha taarifa zako ni sahihi kabla ya kuendelea
            </p>
          </div>
        </div>


        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-6">
          <!-- Left Side: Application Details Input -->
          <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm space-y-8">
            
            <!-- License Type Section -->
            <div>
              <h4 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-orange-500">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                </svg>
                Select License Types
              </h4>
              <div class="space-y-4">
                <div class="input-group flex-col">
                  <label class="text-sm font-semibold text-gray-600 mb-1">Type Of License Being Applied For</label>
                  <select [(ngModel)]="newSelectedLicenseType" class="tool-input w-full">
                    <option [ngValue]="null" disabled selected>Select License Type</option>
                    <option *ngFor="let type of availableLicenseTypes" [ngValue]="type">
                        {{ type.name }}
                    </option>
                  </select>
                </div>
                <button class="w-full py-2 bg-orange-50 text-orange-600 border border-orange-200 rounded-lg hover:bg-orange-100 font-medium transition-colors" (click)="addLicenseType()">
                  Add License Type
                </button>
              </div>
            </div>

            <!-- Previous License Number Section -->
            <div *ngIf="showPreviousLicenseSection">
              <h4 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-orange-500">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                </svg>
                Add Previous License
              </h4>
              <div class="space-y-4">
                <div class="input-group flex-col">
                  <label class="text-sm font-semibold text-gray-600 mb-1">Previous License Number (If Any)</label>
                  <input type="text" [(ngModel)]="newPreviousLicenseNumber" placeholder="Enter previous license number..." class="tool-input w-full" (keyup.enter)="addPreviousLicenseNumber()">
                </div>
                <button class="w-full py-2 bg-orange-50 text-orange-600 border border-orange-200 rounded-lg hover:bg-orange-100 font-medium transition-colors" (click)="addPreviousLicenseNumber()">
                  Add Previous License
                </button>
              </div>
            </div>

          </div>

          <!-- Right Side: Application Summary Lists -->
          <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 space-y-8">
            
            <!-- Added License Types List -->
            <div>
              <h4 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-orange-500">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                </svg>
                Selected License Types
              </h4>
              <div class="space-y-3">
                <div *ngIf="selectedLicenseTypes.length === 0" class="text-center py-4 text-gray-400 bg-white rounded border border-dashed border-gray-300">
                  <p class="text-sm">No license types selected.</p>
                </div>
                <div *ngFor="let item of selectedLicenseTypes; let i = index" class="bg-white p-3 rounded border border-gray-200 shadow-sm relative group flex items-start gap-2">
                  <span class="font-bold text-gray-500 min-w-[24px]">{{ i + 1 }}.</span>
                  <div class="flex-1">
                    <p class="text-sm font-medium text-gray-800">{{ item.name }}</p>
                    <div *ngIf="item.selected_instruments && item.selected_instruments.length > 0" class="mt-1 flex flex-wrap gap-1">
                      <span *ngFor="let inst of item.selected_instruments" class="text-[10px] bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded border border-blue-100 flex items-center gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-2 h-2">
                          <circle cx="10" cy="10" r="10" />
                        </svg>
                        {{ inst }}
                      </span>
                    </div>
                    <div class="flex gap-3 text-xs text-gray-500 mt-1">
                      <span class="bg-orange-50 text-orange-600 px-1.5 py-0.5 rounded border border-orange-100">{{ item.type }}</span>
                      <span class="flex items-center gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3">
                          <path fill-rule="evenodd" d="M5.75 2a.75.75 0 01.75.75V4h7V2.75a.75.75 0 011.5 0V4h.25A2.75 2.75 0 0118 6.75v8.5A2.75 2.75 0 0115.25 18H4.75A2.75 2.75 0 012 15.25v-8.5A2.75 2.75 0 014.75 4h.25V2.75A.75.75 0 015.75 2zm-1 5.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h10.5c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25H4.75z" clip-rule="evenodd" />
                        </svg>
                        {{ item.date }}
                      </span>
                    </div>
                  </div>
                  <button class="text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity" (click)="removeLicenseType(i)">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
                      <path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" />
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <!-- Added Previous Licenses List -->
            <div *ngIf="showPreviousLicenseSection">
              <h4 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-orange-500">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                </svg>
                Added Previous Licenses
              </h4>
              <div class="space-y-3">
                <div *ngIf="previousLicenseNumbers.length === 0" class="text-center py-4 text-gray-400 bg-white rounded border border-dashed border-gray-300">
                  <p class="text-sm">No previous licenses added.</p>
                </div>
                <div *ngFor="let item of previousLicenseNumbers; let i = index" class="bg-white p-3 rounded border border-gray-200 shadow-sm relative group flex items-start gap-2">
                  <span class="font-bold text-gray-500 min-w-[24px]">{{ i + 1 }}.</span>
                  <p class="text-sm text-gray-800 flex-1">{{ item }}</p>
                  <button class="text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity" (click)="removePreviousLicenseNumber(i)">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
                      <path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" />
                    </svg>
                  </button>
                </div>
              </div>
            </div>

          </div>
        </div>

        <div class="flex justify-end">
          <button class="save-btn w-auto px-8 disabled:opacity-50 disabled:cursor-not-allowed" [disabled]="selectedLicenseTypes.length === 0 || (showPreviousLicenseSection && previousLicenseNumbers.length === 0)" (click)="saveParticulars()">Save & Continue</button>
        </div>
      </div>

      <!-- Step 2: Applicant Qualifications -->
      <div *ngIf="currentStep === 2">
        <h3 class="text-xl font-bold text-gray-800 mb-6 border-b pb-2">Applicant Qualifications</h3>

        <!-- Instructional Alert Card -->
        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6 flex items-start gap-3">
          <div class="mt-0.5 text-gray-500">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
              <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z" clip-rule="evenodd" />
            </svg>
          </div>
          <div class="text-sm text-gray-600 space-y-2">
            <p class="font-medium text-gray-800">Ni hatua ya pili ya maombi. Katika hatua hii, tafadhali ongeza sifa zako na uzoefu unaohusiana na kazi unayoiomba:</p>
            <ul class="list-disc list-inside space-y-1 ml-1">
              <li><span class="font-semibold text-gray-700">Add Qualifications:</span> Andika hapa sifa zako.</li>
              <li><span class="font-semibold text-gray-700">Experience:</span> Tumia sehemu hii kujaza uzoefu wako wa kazi unaohusiana na maombi haya.</li>
            </ul>
            <p class="text-xs text-orange-600 font-medium mt-2 bg-orange-50 inline-block px-2 py-1 rounded border border-orange-100">
              Tip/Note: Sifa na uzoefu sahihi huhakikisha maombi yako yanakubalika haraka.
            </p>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-6">
          <!-- Left Side: Input Forms -->
          <div class="space-y-6">
            <!-- Qualifications Input -->
            <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
              <h4 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-orange-500">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                </svg>
                Add Qualification
              </h4>
              <div class="space-y-4">
                <div class="input-group flex-col">
                  <label class="text-sm font-semibold text-gray-600 mb-1">Qualification Details</label>
                  <textarea [(ngModel)]="newQualification" rows="3" placeholder="Andika hapa sifa zako..." class="tool-input w-full"></textarea>
                </div>
                <button class="w-full py-2 bg-orange-50 text-orange-600 border border-orange-200 rounded-lg hover:bg-orange-100 font-medium transition-colors" (click)="addQualification()">
                  Add Qualification
                </button>
              </div>
            </div>

            <!-- Experience Input -->
            <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
              <h4 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-orange-500">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                </svg>
                Add Experience
              </h4>
              <div class="space-y-4">
                <div class="input-group flex-col">
                  <label class="text-sm font-semibold text-gray-600 mb-1">Experience Details</label>
                  <textarea [(ngModel)]="newExperience" rows="3" placeholder="Jaza uzoefu wako wa kazi..." class="tool-input w-full"></textarea>
                </div>
                <button class="w-full py-2 bg-orange-50 text-orange-600 border border-orange-200 rounded-lg hover:bg-orange-100 font-medium transition-colors" (click)="addExperience()">
                  Add Experience
                </button>
              </div>
            </div>
          </div>

          <!-- Right Side: Live Preview Lists -->
          <div class="space-y-6">
            <!-- Added Qualifications List -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
              <h4 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-orange-500">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                </svg>
                Added Qualifications ({{ qualificationsList.length }})
              </h4>
              
              <div class="space-y-3 max-h-[200px] overflow-y-auto pr-2">
                <div *ngIf="qualificationsList.length === 0" class="text-center py-4 text-gray-400 bg-white rounded border border-dashed border-gray-300">
                  <p class="text-sm">No qualifications added yet.</p>
                </div>

                <div *ngFor="let item of qualificationsList; let i = index" class="bg-white p-3 rounded border border-gray-200 shadow-sm relative group flex items-start gap-2">
                  <span class="font-bold text-gray-500 min-w-[24px]">{{ i + 1 }}.</span>
                  <p class="text-sm text-gray-800 flex-1">{{ item }}</p>
                  <button class="text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity" (click)="removeQualification(i)">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
                      <path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" />
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <!-- Added Experiences List -->
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
              <h4 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-orange-500">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5m.75-9 3-3 2.148 2.148A12.061 12.061 0 0116.5 7.605" />
                </svg>
                Added Experiences ({{ experiencesList.length }})
              </h4>
              
              <div class="space-y-3 max-h-[200px] overflow-y-auto pr-2">
                <div *ngIf="experiencesList.length === 0" class="text-center py-4 text-gray-400 bg-white rounded border border-dashed border-gray-300">
                  <p class="text-sm">No experience added yet.</p>
                </div>

                <div *ngFor="let item of experiencesList; let i = index" class="bg-white p-3 rounded border border-gray-200 shadow-sm relative group flex items-start gap-2">
                  <span class="font-bold text-gray-500 min-w-[24px]">{{ i + 1 }}.</span>
                  <p class="text-sm text-gray-800 flex-1">{{ item }}</p>
                  <button class="text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity" (click)="removeExperience(i)">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
                      <path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" />
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="flex justify-between">
          <button class="px-6 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50" (click)="goToStep(1)">Back</button>
          <button class="save-btn w-auto px-8 disabled:opacity-50 disabled:cursor-not-allowed" [disabled]="qualificationsList.length === 0 || experiencesList.length === 0" (click)="saveQualifications()">Save & Continue</button>
        </div>
      </div>

      <!-- Step 3: Tools & Equipment -->
      <div *ngIf="currentStep === 3">
        <h3 class="text-xl font-bold text-gray-800 mb-6 border-b pb-2">Tools & Equipment</h3>
        
        <!-- Instructional Alert Card -->
        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6 flex items-start gap-3">
          <div class="mt-0.5 text-gray-500">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
              <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z" clip-rule="evenodd" />
            </svg>
          </div>
          <div class="text-sm text-gray-600 space-y-2">
            <p class="font-medium text-gray-800">Katika hatua hii, tafadhali kujaza vifaa, mashine, au rasilimali nyingine muhimu ambazo zitahitajika kufanya kazi:</p>
            <ul class="list-disc list-inside space-y-1 ml-1">
              <li><span class="font-semibold text-gray-700">Add Tools, Machinery or Other Resources:</span> Bonyeza hapa kuongeza orodha ya vifaa na mashine zako.</li>
            </ul>
            <p class="text-xs text-orange-600 font-medium mt-2 bg-orange-50 inline-block px-2 py-1 rounded border border-orange-100">
              Tip/Note: Orodhesha vyote kwa uwazi ili tumeweze kuthibitisha uwezo wako.
            </p>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-6">
          <!-- Left Side: Input Form -->
          <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
            <h4 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-orange-500">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
              </svg>
              Add Tools & Equipment
            </h4>
            <div class="space-y-4">
              <div class="input-group flex-col">
                <label class="text-sm font-semibold text-gray-600 mb-1">Tool / Equipment Details</label>
                <textarea [(ngModel)]="newTool" rows="3" placeholder="Enter tool or equipment details..." class="tool-input w-full"></textarea>
              </div>
              <button class="w-full py-2 bg-orange-50 text-orange-600 border border-orange-200 rounded-lg hover:bg-orange-100 font-medium transition-colors" (click)="addTool()">
                Add Tools & Equipment
              </button>
            </div>
          </div>

          <!-- Right Side: Live Preview List -->
          <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
            <h4 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-orange-500">
                <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
              </svg>
              Added Tools ({{ tools.length }})
            </h4>
            
            <div class="space-y-3 max-h-[400px] overflow-y-auto pr-2">
              <div *ngIf="tools.length === 0" class="text-center py-8 text-gray-400 bg-white rounded border border-dashed border-gray-300">
                <p>No tools added yet.</p>
                <p class="text-xs mt-1">Fill the form and click "Add Tool"</p>
              </div>

              <div *ngFor="let tool of tools; let i = index" class="bg-white p-3 rounded border border-gray-200 shadow-sm relative group flex items-start gap-2">
                <span class="font-bold text-gray-500 min-w-[24px]">{{ i + 1 }}.</span>
                <p class="text-sm text-gray-800 flex-1">{{ tool }}</p>
                <button class="text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity" (click)="removeTool(i)">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
                    <path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>



        <!-- Declaration -->
        <div class="flex justify-between mt-8">
          <button class="px-6 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50" (click)="goToStep(2)">Back</button>
          <button class="save-btn w-auto px-8 disabled:opacity-50 disabled:cursor-not-allowed" [disabled]="tools.length === 0" (click)="goToStep(4)">Save & Continue</button>
        </div>
      </div>

      <!-- Step 4: Preview & Confirm -->
      <div *ngIf="currentStep === 4" class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden p-6">
        <div class="bg-orange-50 px-6 py-4 border-b border-orange-100 mb-6 -mx-6 -mt-6">
          <h3 class="text-lg font-bold text-gray-800">Preview & Confirm Application</h3>
        </div>

        <!-- Instructional Alert -->
        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-8 flex items-start gap-3">
          <div class="mt-0.5 text-gray-500">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
              <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z" clip-rule="evenodd" />
            </svg>
          </div>
          <div class="text-sm text-gray-600">
            <p class="font-medium text-gray-800">Please review your application details carefully.</p>
            <p class="mt-1">Ensure all information is correct before submitting. You cannot edit the application after submission.</p>
          </div>
        </div>

        <div class="space-y-8">
          
          <!-- Section 1: Particulars Summary (Profile Style) -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
            <div class="bg-orange-50 px-6 py-4 border-b border-orange-100 flex justify-between items-center">
              <h3 class="text-lg font-bold text-gray-800">
                Applicant Particulars
              </h3>

            </div>
            
            <div class="p-7">
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                
                <!-- NIDA Number -->
                <div class="relative">
                  <input type="text" [value]="particulars.nida || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    {{ particulars.nationality === 'Tanzania' ? 'NIDA Number' : 'Passport Number' }}
                  </label>
                </div>

                <!-- First Name -->
                <div class="relative">
                  <input type="text" [value]="particulars.firstName || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    First Name
                  </label>
                </div>

                <!-- Middle Name -->
                <div class="relative">
                  <input type="text" [value]="particulars.middleName || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Middle Name
                  </label>
                </div>

                <!-- Last Name -->
                <div class="relative">
                  <input type="text" [value]="particulars.lastName || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Last Name
                  </label>
                </div>

                <!-- Gender -->
                <div class="relative">
                  <input type="text" [value]="particulars.gender || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Gender
                  </label>
                </div>

                <!-- Date of Birth -->
                <div class="relative">
                  <input type="text" [value]="particulars.dob || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Date of Birth
                  </label>
                </div>

                <!-- Email -->
                <div class="relative">
                  <input type="text" [value]="particulars.email || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Email
                  </label>
                </div>

                <!-- Phone -->
                <div class="relative">
                  <input type="text" [value]="particulars.phone || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Phone
                  </label>
                </div>

                <!-- Region -->
                <div class="relative">
                  <input type="text" [value]="particulars.region || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Region
                  </label>
                </div>

                <!-- District -->
                <div class="relative">
                  <input type="text" [value]="particulars.district || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    District
                  </label>
                </div>

                <!-- Street -->
                <div class="relative">
                  <input type="text" [value]="particulars.street || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Street
                  </label>
                </div>

              </div>
            </div>
          </div>

          <!-- Section 2: Company Information (Profile Style) -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
            <div class="bg-orange-50 px-6 py-4 border-b border-orange-100">
              <h3 class="text-lg font-bold text-gray-800">
                Company Information
              </h3>
            </div>
            
            <div class="p-7">
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                
                <!-- Company Name -->
                <div class="relative">
                  <input type="text" [value]="particulars.businessName || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Company Name
                  </label>
                </div>

                <!-- Registration Number (BRELA) -->
                <div class="relative">
                  <input type="text" [value]="particulars.brelaNumber || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Registration Number (BRELA)
                  </label>
                </div>

                <!-- Tax Number (TIN) -->
                <div class="relative">
                  <input type="text" [value]="particulars.tin || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Tax Number (TIN)
                  </label>
                </div>

                <!-- Company Email -->
                <div class="relative">
                  <input type="text" [value]="particulars.companyEmail || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Company Email
                  </label>
                </div>

                <!-- Company Phone -->
                <div class="relative">
                  <input type="text" [value]="particulars.companyPhone || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Company Phone
                  </label>
                </div>

                <!-- Region -->
                <div class="relative">
                  <input type="text" [value]="particulars.busRegion || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Region
                  </label>
                </div>

                <!-- District -->
                <div class="relative">
                  <input type="text" [value]="particulars.busDistrict || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    District
                  </label>
                </div>

                <!-- Town -->
                <div class="relative">
                  <input type="text" [value]="particulars.busTown || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Town
                  </label>
                </div>

                <!-- Postal Code -->
                <div class="relative">
                  <input type="text" [value]="particulars.postalCode || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Postal Code
                  </label>
                </div>

                <!-- Street/Village -->
                <div class="relative">
                  <input type="text" [value]="particulars.busStreet || '-'" readonly
                    class="peer w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary" />
                  <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75 dark:text-gray-400">
                    Street/Village
                  </label>
                </div>

              </div>
            </div>
          </div>

          <!-- Section 3: License Info Summary (Profile Style) -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
             <div class="bg-orange-50 px-6 py-4 border-b border-orange-100 flex justify-between items-center">
              <h3 class="text-lg font-bold text-gray-800">
                License Information
              </h3>

            </div>
            <div class="p-7 grid grid-cols-1 lg:grid-cols-2 gap-8">
              <!-- Selected License Types -->
              <div class="relative">
                <div class="w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black dark:border-form-strokedark dark:bg-form-input dark:text-white min-h-[3.5rem]">
                  <ul class="space-y-1">
                    <li *ngFor="let type of selectedLicenseTypes; let i = index" class="text-black flex items-start gap-2">
                      <span class="text-black mt-1 font-bold">{{ i + 1 }}.</span>
                      {{ type.name }}
                    </li>
                  </ul>
                </div>
                <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 dark:text-gray-400">
                  Selected License Types
                </label>
              </div>

              <!-- Previous Licenses -->
              <div class="relative" *ngIf="previousLicenseNumbers.length > 0">
                <div class="w-full rounded-lg border border-stroke bg-transparent px-4 pt-6 pb-2 text-black dark:border-form-strokedark dark:bg-form-input dark:text-white min-h-[3.5rem]">
                  <ul class="space-y-1">
                    <li *ngFor="let lic of previousLicenseNumbers; let i = index" class="text-black flex items-start gap-2">
                      <span class="text-black mt-1 font-bold">{{ i + 1 }}.</span>
                      {{ lic }}
                    </li>
                  </ul>
                </div>
                <label class="absolute left-4 top-4 z-10 origin-[0] -translate-y-3 scale-75 transform text-sm text-gray-500 dark:text-gray-400">
                  Previous Licenses
                </label>
              </div>
            </div>
          </div>

              <!-- Section 2.5: Attachments Summary (Profile Style) -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
            <div class="bg-orange-50 px-6 py-4 border-b border-orange-100 flex justify-between items-center">
              <h3 class="text-lg font-bold text-gray-800">
                Attachments
              </h3>
            </div>
            <div class="p-7 grid grid-cols-1 lg:grid-cols-2 gap-8">
              <!-- Required Attachments -->
              <div>
                <p class="text-xs text-gray-500 uppercase tracking-wider font-semibold mb-3">Required Attachments</p>
                <ul class="space-y-3">
                  <ng-container *ngFor="let doc of requiredDocuments; let i = index">
                    <li class="text-black flex items-center justify-between gap-2 border-b border-gray-50 pb-2 last:border-0">
                      <div class="flex items-center gap-3">
                        <span class="font-bold text-black">{{ i + 1 }}.</span>
                        <div>
                          <span class="block text-sm font-medium">{{ doc.name }}</span>
                          <span *ngIf="doc.status === 'Not Uploaded'" class="text-xs text-orange-500 font-medium italic">Pending Upload</span>
                          <span *ngIf="doc.status === 'Uploaded'" class="text-xs text-green-600 font-medium flex items-center gap-1">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3">
                               <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" />
                            </svg>
                            Uploaded
                          </span>
                        </div>
                      </div>
                      <div class="flex items-center gap-2">
                        <!-- Actions if Uploaded -->
                        <ng-container *ngIf="doc.status === 'Uploaded'">
                            <!-- View -->
                            <button (click)="viewDocument(doc)" class="p-1.5 rounded-lg bg-blue-50 text-blue-600 border border-blue-200 border-b-4 active:border-b-0 active:translate-y-1 transition-all hover:bg-blue-100" title="View Document">
                              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                              </svg>
                            </button>
                            
                            <!-- Edit/Delete (Only if NOT submitted) -->
                            <ng-container *ngIf="!isApplicationSubmitted">
                                <!-- Edit (Trigger Upload) -->
                                <button (click)="triggerUpload(doc)" class="p-1.5 rounded-lg bg-green-50 text-green-600 border border-green-200 border-b-4 active:border-b-0 active:translate-y-1 transition-all hover:bg-green-100" title="Edit/Replace Document">
                                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" />
                                  </svg>
                                </button>
                                
                                <!-- Delete -->
                                <button (click)="deleteDocument(doc)" class="p-1.5 rounded-lg bg-red-50 text-red-600 border border-red-200 border-b-4 active:border-b-0 active:translate-y-1 transition-all hover:bg-red-100" title="Delete Document">
                                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />
                                  </svg>
                                </button>
                            </ng-container>
                        </ng-container>

                        <!-- Upload Button (Only if NOT uploaded) -->
                        <button *ngIf="doc.status !== 'Uploaded'" (click)="triggerUpload(doc)" class="flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-orange-50 text-orange-600 border border-orange-200 border-b-4 active:border-b-0 active:translate-y-1 transition-all hover:bg-orange-100 text-xs font-semibold">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3.5 h-3.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
                          </svg>
                          Upload
                        </button>
                      </div>
                    </li>
                  </ng-container>
                </ul>
              </div>

              <!-- Qualification Documents -->
              <div>
                <p class="text-xs text-gray-500 uppercase tracking-wider font-semibold mb-3">Qualification Documents</p>
                <ul class="space-y-3">
                  <ng-container *ngFor="let doc of qualificationDocuments; let i = index">
                    <li class="text-black flex items-center justify-between gap-2 border-b border-gray-50 pb-2 last:border-0">
                      <div class="flex items-center gap-3">
                        <span class="font-bold text-black">{{ i + 1 }}.</span>
                        <div>
                           <span class="block text-sm font-medium">{{ doc.name }}</span>
                           <span *ngIf="doc.status === 'Not Uploaded'" class="text-xs text-orange-500 font-medium italic">Pending Upload</span>
                           <span *ngIf="doc.status === 'Uploaded'" class="text-xs text-green-600 font-medium flex items-center gap-1">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3">
                               <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" />
                            </svg>
                            Uploaded
                          </span>
                        </div>
                      </div>
                      <div class="flex items-center gap-2">
                        <!-- Actions if Uploaded -->
                        <ng-container *ngIf="doc.status === 'Uploaded'">
                            <!-- View -->
                            <button (click)="viewDocument(doc)" class="p-1.5 rounded-lg bg-blue-50 text-blue-600 border border-blue-200 border-b-4 active:border-b-0 active:translate-y-1 transition-all hover:bg-blue-100" title="View Document">
                              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                              </svg>
                            </button>
                            
                            <!-- Edit/Delete (Only if NOT submitted) -->
                            <ng-container *ngIf="!isApplicationSubmitted">
                                <!-- Edit (Trigger Upload) -->
                                <button (click)="triggerUpload(doc)" class="p-1.5 rounded-lg bg-green-50 text-green-600 border border-green-200 border-b-4 active:border-b-0 active:translate-y-1 transition-all hover:bg-green-100" title="Edit/Replace Document">
                                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" />
                                  </svg>
                                </button>
                                
                                <!-- Delete -->
                                <button (click)="deleteDocument(doc)" class="p-1.5 rounded-lg bg-red-50 text-red-600 border border-red-200 border-b-4 active:border-b-0 active:translate-y-1 transition-all hover:bg-red-100" title="Delete Document">
                                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />
                                  </svg>
                                </button>
                            </ng-container>
                        </ng-container>

                        <!-- Upload Button (Only if NOT uploaded) -->
                        <button *ngIf="doc.status !== 'Uploaded'" (click)="triggerUpload(doc)" class="flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-orange-50 text-orange-600 border border-orange-200 border-b-4 active:border-b-0 active:translate-y-1 transition-all hover:bg-orange-100 text-xs font-semibold">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3.5 h-3.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
                          </svg>
                          Upload
                        </button>
                      </div>
                    </li>
                  </ng-container>
                </ul>
              </div>
            </div>
          </div>

          <!-- Section 4: Qualifications Summary (Profile Style) -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
            <div class="bg-orange-50 px-6 py-4 border-b border-orange-100 flex justify-between items-center">
              <h3 class="text-lg font-bold text-gray-800">
                Qualifications & Experience
              </h3>

            </div>
            <div class="p-7 grid grid-cols-1 lg:grid-cols-2 gap-8">
              <div>
                <p class="text-xs text-gray-500 uppercase tracking-wider font-semibold mb-3">Qualifications</p>
                <ul class="space-y-2">
                  <li *ngFor="let qual of qualificationsList; let i = index" class="text-black flex items-start gap-2">
                    <span class="text-black mt-1 font-bold">{{ i + 1 }}.</span>
                    {{ qual }}
                  </li>
                </ul>
              </div>
              <div>
                <p class="text-xs text-gray-500 uppercase tracking-wider font-semibold mb-3">Experience</p>
                <ul class="space-y-2">
                  <li *ngFor="let exp of experiencesList; let i = index" class="text-black flex items-start gap-2">
                    <span class="text-black mt-1 font-bold">{{ i + 1 }}.</span>
                    {{ exp }}
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <!-- Section 5: Tools Summary (Profile Style) -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
            <div class="bg-orange-50 px-6 py-4 border-b border-orange-100 flex justify-between items-center">
              <h3 class="text-lg font-bold text-gray-800">
                Tools & Equipment
              </h3>

            </div>
            <div class="p-7">
              <ul class="space-y-2">
                <li *ngFor="let tool of tools; let i = index" class="text-black flex items-start gap-2">
                  <span class="text-black mt-1 font-bold">{{ i + 1 }}.</span>
                  {{ tool }}
                </li>
              </ul>
            </div>
          </div>
<!-- Hidden File Input for Uploads -->
<input type="file" #fileInput (change)="onFileSelected($event)" accept="application/pdf" style="display: none;">

          <!-- Declaration (Profile Style) -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
            <div class="bg-orange-50 px-6 py-4 border-b border-orange-100">
              <h3 class="text-lg font-bold text-gray-800">Declaration</h3>
            </div>
            <div class="p-7">
              <label class="flex items-start gap-3 cursor-pointer">
                <input type="checkbox" [(ngModel)]="declaration" class="mt-1 w-5 h-5 text-[#F59E0B] rounded border-gray-300 focus:ring-[#F59E0B]">
                <div class="text-black leading-relaxed">
                   <p class="font-medium mb-1 text-black">I hereby declare that the information provided is true and correct.</p>
                   <p class="text-black">By checking this box, I declare that all the information provided in this application is true and accurate to the best of my knowledge. I understand that providing false information may result in application rejection or legal action.</p>
                </div>
              </label>
            </div>
          </div>

          <!-- Actions -->
          <div class="flex justify-between pt-4">
            <button class="px-6 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50" (click)="goToStep(3)">Back</button>
            <button class="save-btn w-auto px-8 bg-[#F59E0B] hover:bg-[#D97706] text-white disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-orange-200" 
                    [disabled]="!declaration" 
                    (click)="submitApplication()">
              Submit Application
            </button>

        </div>
      </div>

    </div>

  </div>
</div>

<!-- Custom Confirmation Modal -->
<div *ngIf="showReplaceModal" class="fixed inset-0 z-50 flex items-center justify-center overflow-y-auto overflow-x-hidden bg-black/50 p-4 md:p-6">
  <div class="relative w-full max-w-md rounded-lg bg-white shadow-lg dark:bg-boxdark">
    <!-- Modal Header -->
    <div class="flex items-center justify-between border-b border-stroke px-6 py-4 dark:border-strokedark">
      <h3 class="text-xl font-semibold text-black dark:text-white">
        Replace License Selection
      </h3>
      <button (click)="cancelReplace()" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <!-- Modal Body -->
    <div class="p-6">
      <p class="text-base text-gray-600 dark:text-gray-300">
        You have already selected a license. You must complete the current application process before applying for another one. Do you want to replace it with <strong>{{ pendingLicenseType?.name }}</strong>?
      </p>
    </div>

    <!-- Modal Footer -->
    <div class="flex items-center justify-end gap-4 border-t border-stroke px-6 py-4 dark:border-strokedark">
      <button (click)="cancelReplace()" class="rounded border border-stroke px-6 py-2 font-medium text-black hover:bg-gray-100 dark:border-strokedark dark:text-white dark:hover:bg-meta-4">
        Cancel
      </button>
      <button (click)="confirmReplace()" class="rounded bg-orange-500 px-6 py-2 font-medium text-white hover:bg-orange-600">
        Replace
      </button>
    </div>
  </div>
</div>

<!-- PDF Preview Modal -->
<div *ngIf="isModalOpen" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 p-4 backdrop-blur-sm">
  <div class="bg-white rounded-xl shadow-2xl w-full max-w-5xl h-[90vh] flex flex-col overflow-hidden animate-fade-in-up">
    <!-- Modal Header -->
    <div class="flex justify-between items-center p-4 border-b border-gray-100 bg-gray-50">
      <div class="flex items-center gap-3">
        <div class="p-2 bg-orange-100 rounded-lg text-orange-600">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
          </svg>
        </div>
        <div>
          <h3 class="font-bold text-gray-800 text-lg">{{ previewDocName }}</h3>
          <p class="text-xs text-gray-500">Document Preview</p>
        </div>
      </div>
      <button (click)="closeModal()" class="p-2 hover:bg-gray-200 rounded-full transition-colors text-gray-500 hover:text-gray-700">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    
    <!-- Modal Body (PDF Viewer) -->
    <div class="flex-1 bg-gray-100 relative">
      <div *ngIf="!previewUrl" class="absolute inset-0 flex items-center justify-center">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"></div>
      </div>
      <iframe *ngIf="previewUrl" [src]="previewUrl" class="w-full h-full border-0" type="application/pdf"></iframe>
    </div>
  </div>
</div>
